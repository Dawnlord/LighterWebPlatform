<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>TimeShiftGame</title>
    <script>

        var input = null;

        // initialize
        window.onload = function() {

            input = document.getElementById('input');

            G_hSocket = WebSocketEngine("127.0.0.1", 9901,
                    function(){
                        var sPacket = {};
                        sPacket.MM = "ConnectGateWay";
                        SendBuffer(G_hSocket, sPacket);
                    },

                    function(oPacket){
                        switch(oPacket.MM)
                        {
                            case "ConnectGateWay":

                                ConnectGateWay(oPacket.IP, oPacket.Port);


                                break;
                        }
                    },

                    function(){

                    }

            );

            function ConnectGateWay(sIP, iPORT) {
                G_hSocket = WebSocketEngine(sIP, iPORT,
                        function(){

                        },

                        function(oPacket){
                            if (G_SceneState == G_SceneType.TSMainMenuLayer)
                                TSMainMenu.MessageProc(oPacket);

                            if (G_SceneState == G_SceneType.TSGameLayer)
                                TSGameLayer.MessageProc(oPacket);
                        },

                        function(){

                        }
                );
                console.log("连接成功! Port:" + iPORT + " IP:" + sIP);

                G_hSocket.PORT = iPORT;
                G_hSocket.IP = sIP;
            }
        }

        function _send(){
            var sPacket = {};
            sPacket.MM = "SysOrder";
            sPacket.Order = input.value;
            SendBuffer(G_hSocket, sPacket);
        };

    </script>
</head>
<body style="padding:0; margin: 0; background: #000;">
<div style="width: 320px;height: 480px;margin: 0 auto;">
    <canvas id="gameCanvas" width="320" height="480" ></canvas>
</div>
<div id="cou" style="width:320px;margin: 0 auto;"></div>


<input type="text" id="input">
<button id="send" onclick="_send()">Send</button>

</body>
</html>

<script src="cocos2d.js"> </script>